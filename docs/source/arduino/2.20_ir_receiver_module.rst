.. _ar_receive:

2.20 IR-Empfängermodul
=========================

Überblick
-------------

In dieser Lektion lernen Sie, das IR-Empfängermodul zu verwenden. Der IR-Empfänger ist eine Komponente mit Fotozelle, die auf den Empfang von Infrarotlicht abgestimmt ist. Es wird fast immer zur Fernbedienungserkennung verwendet - jeder Fernseher und DVD-Player hat eine davon an der Vorderseite, um das IR-Signal vom Clicker zu empfangen. In der Fernbedienung befindet sich eine passende IR-LED, die IR-Impulse aussendet, um dem Fernseher mitzuteilen, dass er ein- oder ausschalten oder den Kanal wechseln soll.


Erforderliche Komponenten
-----------------------------

.. image:: img/Part_two_20.png

* :ref:`cpn_mega2560`
* :ref:`cpn_wires`
* :ref:`cpn_receive`

Schematische Darstellung
---------------------------

.. image:: img/image182.png
   :align: center

Fritzing-Schaltung
---------------------

In diesem Beispiel verbinden wir den linken Pin (-) des IR-Empfängermoduls mit GND, den mittleren Pin mit 5 V und den rechten Pin (S) mit Pin 11.


.. image:: img/image183.png
   :align: center

Code
----------


.. note::

    * Sie können die Datei ``2.20_irReceiver.ino`` unter dem Pfad ``sunfounder_vincent_kit_for_arduino\code\2.20_irReceiver`` direkt öffnen.
    * Oder kopieren Sie diesen Code in Arduino IDE 1/2.
    * Laden Sie dann :ref:`ar_upload_code` auf das Board hoch.
    * Bitte stellen Sie sicher, dass Sie die Bibliothek ``IRremote`` hinzugefügt haben, detaillierte Anleitungen finden Sie unter :ref:`add_libraries_ar`.


.. raw:: html

    <iframe src=https://create.arduino.cc/editor/sunfounder01/b1f07663-c4d5-4b0e-b0a7-b10ff96ee2ee/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>

Nach dem Hochladen der Codes auf die Mega2560-Platine können Sie sehen, dass der aktuelle Wert der gedrückten Taste der IR-Fernbedienung auf dem seriellen Monitor angezeigt wird.


Code-Analyse
---------------------

Es gibt zwei wichtige Teile, die in diesem Programm zu beachten sind.

1. Der Code verwendet eine zusätzliche Datei decodeKeyValue.ino, um die Werte in der Klasse decode_result in den Schlüsselwert zu decodieren. Die Datei wird zusammen mit der Hauptdatei geöffnet.

2. Die IR-Remote-Funktion wird durch Aufrufen von Funktionen der IRremote.h-Bibliothek erreicht.

.. code-block:: arduino

    #include <IRremote.h>

**Bibliotheksfunktionen:**

.. code-block:: arduino

    IRrecv(int recvpin)

Erstellen Sie ein IRrecv-Objekt, um ein IR-Empfängermodul zu steuern.

.. code-block:: arduino

    decode_result

In diesem Kit sind die Ergebnisse normalerweise 8-stellige Hexadezimalzahlen, beginnend mit 00FF. Sie können die Datei decodeKeyValue.ino in der Beispieldatei überprüfen.


.. code-block:: arduino

    void enableIRIn()

Initialisieren Sie das IR-Empfängermodul.

.. code-block:: arduino

    int decode(decode_results *results);

Dekodiert die empfangene IR-Nachricht. Gibt 0 zurück, wenn keine Daten bereit sind, 1, wenn Daten bereit sind. Ergebnisse der Decodierung werden in Ergebnissen gespeichert.

.. code-block:: arduino

    void resume()

Neustart, um einen anderen Wert zu erhalten.

Phänomen Bild
------------------------

.. image:: img/image184.jpeg
   :align: center